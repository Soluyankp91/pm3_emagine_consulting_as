<div class="workflow-sales">
    <ng-container *ngIf="readOnlyMode; else editMode">
        <!-- Main data -->
        <div fxLayout="column" fxLayoutAlign="start start" class="workflow-sales--process-data u-w--100">
            <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                <h1 class="workflow-readonly--header-main">
                    <span class="process-name">Sales.</span>
                    <span class="anchor-name">Main data</span>
                </h1>
                <h2 class="workflow-readonly--header u-mt--10 u-mb--20">Project</h2>
                    <!-- <button mat-button (click)="changeReadonly()">Change</button> -->
                    <!-- EDIT -->
                    <!-- NB: uncomment for readonly\edit -->
                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Project Type (Legacy)</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.projectType?.value?.name}}
                        </span>
                    </div>
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Sales Type</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.salesType?.value?.name}}
                        </span>
                    </div>
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Delivery Type</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.deliveryType?.value?.name}}
                        </span>
                    </div>
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Margin</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.margin?.value}}
                        </span>
                    </div>
                </div>

                <div fxLayout="column" class="u-w--100 u-mb--20">
                    <h3 class="workflow-readonly--gray-header">Project Category</h3>
                    <span class="workflow-readonly--blue-text-bold">
                        {{salesMainDataForm?.projectCategory?.value}}
                    </span>
                </div>

                <div fxLayout="column" class="u-w--100 u-mb--10">
                    <h3 class="workflow-readonly--gray-header">Project Description</h3>
                    <p class="workflow-readonly--blue-text">
                        {{salesMainDataForm?.projectDescription?.value}}
                    </p>
                </div>
            </div>
            <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
            <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                <h2 class="workflow-readonly--header u-mb--20">Invoicing</h2>
                <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                    <h3 class="workflow-readonly--gray-header">Discounts</h3>
                    <span class="workflow-readonly--blue-text-bold">
                        {{salesMainDataForm?.discounts?.value}}
                    </span>
                </div>
                <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                    <h3 class="workflow-readonly--blue-header">Commission</h3>
                    <span class="workflow-extension--blue-text">
                        <!-- {{salesMainDataForm?.discounts?.value?.name}} -->
                        -
                    </span>
                </div>
            </div>
            <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
            <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                <h2 class="workflow-readonly--header u-mb--20">Account manager</h2>
                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                    <div fxLayout="column" fxLayoutAlign="start start" class="u-mb--10" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Sales Account Manager</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.salesAccountManagerIdValue?.value}}
                        </span>
                    </div>
                    <div fxLayout="column" fxLayoutAlign="start start" class="u-mb--10" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Commission Manager Type</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.commissionAccountManagerIdValue?.value}}
                        </span>
                    </div>
                </div>
                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                    <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                        <h3 class="workflow-readonly--gray-header">Contract Expiration Notification</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.contractExpirationNotification?.value}}
                        </span>
                    </div>
                </div>
                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                    <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                        <h3 class="workflow-readonly--gray-header">Remarks</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            <!-- {{salesMainDataForm?.discounts?.value?.name}} -->
                            None
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <mat-divider class="u-mt--20 u-mb--20"></mat-divider>
        <!-- Client data -->
        <div fxLayout="column" fxLayoutAlign="start start" class="workflow-sales--process-data u-w--100">
            <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                <h1 class="workflow-readonly--header-main u-mb--10">
                    <span class="process-name">Sales.</span>
                    <span class="anchor-name">Client data</span>
                </h1>

                <div fxLayout="column" class="u-w--100 u-mb--20">
                    <h3 class="workflow-readonly--gray-header">Client relation</h3>
                    <span class="workflow-readonly--blue-text-bold">
                        {{salesMainDataForm?.projectCategory?.value}}
                    </span>
                </div>

                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                    <div fxLayout="column" fxFlex="50%">
                        <h3 class="workflow-readonly--gray-header">Direct client</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.projectType?.value?.name}}
                        </span>
                    </div>
                    <div fxLayout="column" fxFlex="50%">
                        <h3 class="workflow-readonly--gray-header">End client</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.salesType?.value?.name}}
                        </span>
                    </div>
                </div>
            </div>
            <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
            <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                <h2 class="workflow-readonly--header u-mb--20">Client contract duration</h2>
                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Start date</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.projectType?.value?.name}}
                        </span>
                    </div>
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">End date</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.salesType?.value?.name}}
                        </span>
                    </div>
                </div>
                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Option to extend</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.projectType?.value?.name}}
                        </span>
                    </div>
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Duration</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.salesType?.value?.name}}
                        </span>
                    </div>
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Deadline</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.deliveryType?.value?.name}}
                        </span>
                    </div>
                </div>
            </div>
            <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
            <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                <h2 class="workflow-readonly--header u-mb--20">Client project</h2>
                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Shared Cap on Time Reportion</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.projectType?.value?.name}}
                        </span>
                    </div>
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Max. value</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.salesType?.value?.name}}
                        </span>
                    </div>
                </div>
            </div>
            <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
            <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                <h2 class="workflow-readonly--header u-mb--20">Client invoicing</h2>
                <div fxLayout="column" class="u-w--100 u-mb--20">
                    <h3 class="workflow-readonly--gray-header">Invoicing Entity</h3>
                    <span class="workflow-readonly--blue-text-bold">
                        {{salesMainDataForm?.projectCategory?.value}}
                    </span>
                </div>
                <div fxLayout="column" class="u-w--100 u-mb--20">
                    <h3 class="workflow-readonly--gray-header">Price</h3>
                    <span class="workflow-readonly--blue-text-bold">
                        {{salesMainDataForm?.projectCategory?.value}}
                    </span>
                </div>
                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Rate</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.projectType?.value?.name}}
                        </span>
                    </div>
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Unit type</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.salesType?.value?.name}}
                        </span>
                    </div>
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Currency</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.salesType?.value?.name}}
                        </span>
                    </div>
                </div>
                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Invoicing ref. no.</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.projectType?.value?.name}}
                        </span>
                    </div>
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Invoice currency</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.salesType?.value?.name}}
                        </span>
                    </div>
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Invoicing frequency</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.salesType?.value?.name}}
                        </span>
                    </div>
                </div>
                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Client Invoicing recipient</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.projectType?.value?.name}}
                        </span>
                    </div>
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Invoicing reference person</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.salesType?.value?.name}}
                        </span>
                    </div>
                </div>
            </div>
            <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
            <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                <h2 class="workflow-readonly--header u-mb--20">Client invoicing</h2>
                add table here
            </div>
            <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
            <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                <h2 class="workflow-readonly--header u-mb--20">Client evaluation</h2>
                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Evaluations</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.projectType?.value?.name}}
                        </span>
                    </div>
                    <div fxLayout="column" fxFlex="25%">
                        <h3 class="workflow-readonly--gray-header">Evaluations Reference Person</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.salesType?.value?.name}}
                        </span>
                    </div>
                </div>
            </div>
            <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
            <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                <h2 class="workflow-readonly--header u-mb--20">Client contract</h2>
                <div fxLayout="column" class="u-w--100 u-mb--20">
                    <h3 class="workflow-readonly--gray-header">Special Contract Terms</h3>
                    <span class="workflow-readonly--blue-text">
                        {{salesMainDataForm?.projectType?.value?.name}}
                    </span>
                </div>
                <div fxLayout="column" class="u-w--100 u-mb--20">
                    <h3 class="workflow-readonly--gray-header">Contract Signers</h3>
                    <span class="workflow-readonly--blue-text-bold">
                        {{salesMainDataForm?.salesType?.value?.name}}
                    </span>
                </div>
            </div>
        </div>
        <mat-divider class="u-mt--20 u-mb--20"></mat-divider>
        <!-- Consultant data -->
        <ng-container *ngFor="let item of [1,2]">
            <div fxLayout="column" fxLayoutAlign="start start" class="workflow-sales--process-data u-w--100">
                <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                    <h1 class="workflow-readonly--header-main u-mb--10">
                        <span class="process-name">Sales.</span>
                        <span class="anchor-name">Consultant data</span>
                    </h1>

                    <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                        <div fxLayout="column" fxFlex="25%">
                            <h3 class="workflow-readonly--gray-header">Employment type</h3>
                            <span class="workflow-readonly--blue-text-bold">
                                {{salesMainDataForm?.projectType?.value?.name}}
                            </span>
                        </div>
                        <div fxLayout="column">
                            <h3 class="workflow-readonly--gray-header">Consultant</h3>
                            <div fxLayout="row" fxLayoutAlign="start center" class="u-mb--20">
                                <img class="workflow-extension--consultant-data--consultant-img u-mr--16" src="https://placekitten.com/50/50">
                                <div fxLayout="column">
                                    <p class="workflow-extension--consultant-data--consultant-name">
                                        <!-- {{contractsConsultantsDataForm.consultantData.at(i).get('consultantName')?.value}} -->
                                        Robertsen Oscar
                                    </p>
                                    <span class="workflow-extension--consultant-data--consultant-text">
                                        Just Do IT | Warsaw, PL | #9876 / PL-06281
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
                <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                    <h2 class="workflow-readonly--header u-mb--20">Consultant contract duration</h2>
                    <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                        <h3 class="workflow-readonly--gray-header">Project Duration</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.projectType?.value?.name}}
                        </span>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                        <div fxLayout="column" fxFlex="25%">
                            <h3 class="workflow-readonly--gray-header">Start date</h3>
                            <span class="workflow-readonly--blue-text-bold">
                                {{salesMainDataForm?.projectType?.value?.name}}
                            </span>
                        </div>
                        <div fxLayout="column" fxFlex="25%">
                            <h3 class="workflow-readonly--gray-header">End date</h3>
                            <span class="workflow-readonly--blue-text-bold">
                                {{salesMainDataForm?.salesType?.value?.name}}
                            </span>
                        </div>
                    </div>
                </div>
                <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
                <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                    <h2 class="workflow-readonly--header u-mb--20">Consultant project</h2>
                    <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                        <div fxLayout="column" fxFlex="50%">
                            <h3 class="workflow-readonly--gray-header">Workplace</h3>
                            <div fxLayout="row" class="u-w--10">
                                <span class="workflow-readonly--blue-text-bold" fxFlex="50%">
                                    <!-- {{salesMainDataForm?.projectType?.value?.name}} -->Onsite
                                </span>
                                <span class="workflow-readonly--blue-text-bold" fxFlex="50%">
                                    <!-- {{salesMainDataForm?.projectType?.value?.name}} -->Marsza≈Çkowska 123, Warsaw
                                </span>
                            </div>
                            <div fxLayout="row" class="u-w--10">
                                <span class="workflow-readonly--blue-text-bold" fxFlex="50%">
                                    <!-- {{salesMainDataForm?.projectType?.value?.name}} -->PDC Office
                                </span>
                                <span class="workflow-readonly--blue-text-bold" fxFlex="50%">
                                    <!-- {{salesMainDataForm?.projectType?.value?.name}} -->Domaniewska 39a, Warsaw
                                </span>
                            </div>
                            <div fxLayout="row" class="u-w--10">
                                <span class="workflow-readonly--blue-text-bold" fxFlex="50%">
                                    <!-- {{salesMainDataForm?.projectType?.value?.name}} -->Remote
                                </span>
                                <span class="workflow-readonly--blue-text-bold" fxFlex="50%">
                                    <!-- {{salesMainDataForm?.projectType?.value?.name}} -->Poland
                                </span>
                            </div>
                        </div>
                        <div fxLayout="column" fxFlex="50%">
                            <h3 class="workflow-readonly--gray-header">Percentage onsite</h3>
                            <span class="workflow-readonly--blue-text-bold">
                                {{salesMainDataForm?.salesType?.value?.name}}
                            </span>
                        </div>
                    </div>
                    <div fxLayout="column" class="u-w--100 u-mb--20">
                        <h3 class="workflow-readonly--gray-header">Expected workload</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.projectCategory?.value}}
                        </span>
                    </div>
                    <div fxLayout="column" class="u-w--100 u-mb--20">
                        <h3 class="workflow-readonly--gray-header">Cap on Time Reporting</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.projectCategory?.value}}
                        </span>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                        <div fxLayout="column" fxFlex="25%">
                            <h3 class="workflow-readonly--gray-header">Max. value</h3>
                            <span class="workflow-readonly--blue-text-bold">
                                {{salesMainDataForm?.projectType?.value?.name}}
                            </span>
                        </div>
                        <div fxLayout="column" fxFlex="25%">
                            <h3 class="workflow-readonly--gray-header">Currency</h3>
                            <span class="workflow-readonly--blue-text-bold">
                                {{salesMainDataForm?.salesType?.value?.name}}
                            </span>
                        </div>
                    </div>
                </div>
                <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
                <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                    <h2 class="workflow-readonly--header u-mb--20">CONSULTANT PAYMENT</h2>
                    <div fxLayout="column" class="u-w--100 u-mb--20">
                        <h3 class="workflow-readonly--gray-header">ProData Entity</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.projectCategory?.value}}
                        </span>
                    </div>
                    <div fxLayout="column" class="u-w--100 u-mb--20">
                        <h3 class="workflow-readonly--gray-header">Price</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.projectCategory?.value}}
                        </span>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                        <div fxLayout="column" fxFlex="25%">
                            <h3 class="workflow-readonly--gray-header">Rate</h3>
                            <span class="workflow-readonly--blue-text-bold">
                                {{salesMainDataForm?.projectType?.value?.name}}
                            </span>
                        </div>
                        <div fxLayout="column" fxFlex="25%">
                            <h3 class="workflow-readonly--gray-header">Unit type</h3>
                            <span class="workflow-readonly--blue-text-bold">
                                {{salesMainDataForm?.salesType?.value?.name}}
                            </span>
                        </div>
                        <div fxLayout="column" fxFlex="25%">
                            <h3 class="workflow-readonly--gray-header">Currency</h3>
                            <span class="workflow-readonly--blue-text-bold">
                                {{salesMainDataForm?.salesType?.value?.name}}
                            </span>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                        <div fxLayout="column" fxFlex="25%">
                            <h3 class="workflow-readonly--gray-header">PDC-to-PDC rate</h3>
                            <span class="workflow-readonly--blue-text-bold">
                                {{salesMainDataForm?.projectType?.value?.name}}
                            </span>
                        </div>
                        <div fxLayout="column" fxFlex="25%">
                            <h3 class="workflow-readonly--gray-header">Unit type</h3>
                            <span class="workflow-readonly--blue-text-bold">
                                {{salesMainDataForm?.salesType?.value?.name}}
                            </span>
                        </div>
                        <div fxLayout="column" fxFlex="25%">
                            <h3 class="workflow-readonly--gray-header">Currency</h3>
                            <span class="workflow-readonly--blue-text-bold">
                                {{salesMainDataForm?.salesType?.value?.name}}
                            </span>
                        </div>
                    </div>
                </div>
                <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
                <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                    <h2 class="workflow-readonly--header u-mb--20">Consultant contract</h2>
                    <div fxLayout="column" class="u-w--100 u-mb--20">
                        <h3 class="workflow-readonly--gray-header">Special Contract Terms</h3>
                        <span class="workflow-readonly--blue-text">
                            {{salesMainDataForm?.projectCategory?.value}}
                        </span>
                    </div>
                </div>
                <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
                <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                    <h2 class="workflow-readonly--header u-mb--20">Account manager</h2>
                    <div fxLayout="column" class="u-w--100 u-mb--20">
                        <h3 class="workflow-readonly--gray-header">Delivery Account Manager</h3>
                        <span class="workflow-readonly--blue-text-bold">
                            {{salesMainDataForm?.projectCategory?.value}}
                        </span>
                    </div>
                </div>
            </div>
            <mat-divider class="u-mt--20 u-mb--20"></mat-divider>
        </ng-container>
    </ng-container>
    <ng-template #editMode>
        <ng-container *ngIf="(activeSideSection !== workflowSideSections.TerminateWorkflow) && (activeSideSection !== workflowSideSections.TerminateConsultant); else terminationTemplate">
            <form [formGroup]="salesMainDataForm" id="mainData" class="workflow-form workflow-form--main u-w--100">
                <ng-container *ngIf="(activeSideSection === workflowSideSections.StartConsultantPeriod) || (activeSideSection === workflowSideSections.ChangeConsultantPeriod) || (activeSideSection === workflowSideSections.ExtendConsultantPeriod); else startClientPeriodTemplate">
                    <div fxLayout="column" fxLayoutAlign="start start" class="workflow-sales--process-data u-w--100">
                        <h1 class="workflow-section--header-main">Main data</h1>
                        <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                            <mat-form-field appearance="outline" class="u-w--100 textarea-input " fxFlex="0 0 calc(66% + 16px)">
                                <mat-label>Remarks</mat-label>
                                <textarea matInput autocomplete="new-password" name="remarks" formControlName="remarks">
                                </textarea>
                            </mat-form-field>
                        </div>
                        <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                            <mat-checkbox color="accent" formControlName="noRemarks" name="noRemarks" class="black-checkbox" (change)="disableOrEnableInput(salesMainDataForm?.noRemarks?.value, salesMainDataForm?.remarks)">
                                None
                            </mat-checkbox>
                        </div>
                    </div>
                </ng-container>
                <ng-template #startClientPeriodTemplate>
                    <div fxLayout="column" fxLayoutAlign="start start" class="workflow-sales--process-data u-w--100">
                        <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                            <h1 class="workflow-section--header-main">Main data</h1>
                            <h2 class="workflow-section--header">Project</h2>
                            <ng-container *ngIf="activeSideSection === workflowSideSections.StartClientPeriod">
                                <h3 class="workflow-gray--header">Project Type (Legacy)</h3>
                                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10 u-mt--10">
                                    <mat-form-field appearance="outline" class="u-w--100  filter-select" fxFlex="33%">
                                        <mat-label>Project type</mat-label>
                                        <mat-select formControlName="projectType" [disableOptionCentering]="false" [compareWith]="compareWithFn">
                                            <mat-option *ngFor="let item of projectTypes" [value]="item">
                                                {{ item.name }}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>

                                <h3 class="workflow-gray--header">Sales Type</h3>
                                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                                    <mat-button-toggle-group class="workflow-toggle-buttons u-mt--10" formControlName="salesType" (change)="salesTypeChange($event.value)">
                                        <mat-button-toggle [value]="item" *ngFor="let item of saleTypes">
                                            {{ item.name }}
                                        </mat-button-toggle>
                                    </mat-button-toggle-group>
                                </div>

                                <h3 class="workflow-gray--header">Delivery Type</h3>
                                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                                    <mat-button-toggle-group class="workflow-toggle-buttons u-mt--10" formControlName="deliveryType">
                                        <mat-button-toggle
                                            [value]="item"
                                            *ngFor="let item of deliveryTypes"
                                            [ngClass]="{'hide':
                                                    item.name === 'ManagedService' && salesMainDataForm?.salesType?.value?.name !== 'ManagedService' ||
                                                    item.name !== 'ManagedService' && salesMainDataForm?.salesType?.value?.name === 'ManagedService'
                                            }">
                                            {{ item.name }}
                                        </mat-button-toggle>
                                    </mat-button-toggle-group>
                                </div>
                                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                                    <mat-form-field appearance="outline" class="u-w--100  filter-select u-mr--16" fxFlex="33%">
                                        <mat-label>Project Category</mat-label>
                                        <mat-select formControlName="projectCategory" [disableOptionCentering]="false">
                                            <mat-option *ngFor="let item of [0]" [value]="item">
                                                {{ item }}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </ng-container>
                            <ng-container *ngIf="activeSideSection === workflowSideSections.ExtendClientPeriod || activeSideSection === workflowSideSections.ChangeClientPeriod">
                                <div fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="120px" class="u-w--100 u-mb--20">
                                    <div fxLayout="column">
                                        <h3 class="workflow-extension--gray-header">Project Type (Legacy)</h3>
                                        <span class="workflow-extension--blue-text">
                                            {{salesMainDataForm?.projectType?.value?.name}}
                                        </span>
                                    </div>
                                    <div fxLayout="column">
                                        <h3 class="workflow-extension--gray-header">Sales Type</h3>
                                        <span class="workflow-extension--blue-text">
                                            {{salesMainDataForm?.salesType?.value?.name}}
                                        </span>
                                    </div>
                                    <div fxLayout="column">
                                        <h3 class="workflow-extension--gray-header">Delivery Type</h3>
                                        <span class="workflow-extension--blue-text">
                                            {{salesMainDataForm?.deliveryType?.value?.name}}
                                        </span>
                                    </div>
                                </div>

                                <div fxLayout="column" class="u-w--100 u-mb--20">
                                    <h3 class="workflow-extension--gray-header">Project Category</h3>
                                    <span class="workflow-extension--blue-text">
                                        {{salesMainDataForm?.projectCategory?.value?.name}}
                                    </span>
                                </div>
                            </ng-container>

                            <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                                <mat-form-field appearance="outline" class="u-w--100  filter-select u-mr--16" fxFlex="33%">
                                    <mat-label>Margin</mat-label>
                                    <mat-select formControlName="margin" [disableOptionCentering]="true" required>
                                        <mat-option class="mat-select-clear-option">
                                            Clear
                                        </mat-option>
                                        <mat-option *ngFor="let item of margins" [value]="item.id">
                                            {{ item.name }}
                                        </mat-option>
                                    </mat-select>
                                    <mat-error>{{getValidationMessage(salesMainDataForm.margin)}}</mat-error>
                                </mat-form-field>
                            </div>

                            <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                                <mat-form-field appearance="outline" class="u-w--100 textarea-input " fxFlex="0 0 calc(66% + 16px)">
                                    <mat-label>Project Description</mat-label>
                                    <textarea matInput autocomplete="new-password" name="projectDescription" formControlName="projectDescription">
                                    </textarea>
                                </mat-form-field>
                            </div>
                        </div>
                        <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
                        <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                            <h2 class="workflow-section--header">Invoicing</h2>
                            <h3 class="workflow-gray--header">Discounts</h3>
                            <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                                <mat-button-toggle-group class="workflow-toggle-buttons u-mt--10" formControlName="discounts">
                                    <mat-button-toggle
                                        [value]="item.value"
                                        *ngFor="let item of [{name: 'None', value: null}, {name: 'SKI 02.17', value: 'SKI-02-17'}]">
                                        {{ item.name }}
                                    </mat-button-toggle>
                                </mat-button-toggle-group>
                            </div>

                            <h3 class="workflow-gray--header">Commission</h3>

                                <div fxLayout="row" fxLayoutAlign="space-between start" fxLayoutGap="10px" class="workflow-sales-inline--form__header-container u-w--100" *ngIf="salesMainDataForm.commissions?.controls?.length">
                                    <span fxFlex="15%" class="workflow-sales-inline--form__header u-w--100">
                                        Type
                                    </span>
                                    <span fxFlex="10%" class="workflow-sales-inline--form__header u-w--100">
                                        Value
                                    </span>
                                    <span fxFlex="10%" class="workflow-sales-inline--form__header u-w--100">
                                        Currency
                                    </span>
                                    <span fxFlex="15%" class="workflow-sales-inline--form__header u-w--100">
                                        Recipient type
                                    </span>
                                    <span fxFlex="25%" class="workflow-sales-inline--form__header u-w--100">
                                        Recipient
                                    </span>
                                    <span fxFlex="15%" class="workflow-sales-inline--form__header u-w--100">
                                        Frequency
                                    </span>
                                    <span fxFlex="10%" class="workflow-sales-inline--form__header u-w--100">

                                    </span>
                                </div>
                                <ng-container formArrayName="commissions" class="u-w--100">
                                    <div fxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="10px" class="inline-edit-form workflow-sales-inline--form__row u-w--100"
                                        *ngFor="let rate of salesMainDataForm.commissions.controls; index as i"
                                        [formArrayName]="i">
                                        <ng-container *ngIf="salesMainDataForm.commissions.at(i).get('editable')?.value">
                                            <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="15%">
                                                <input matInput type="text" formControlName="type" placeholder="Type" />
                                            </mat-form-field>
                                            <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="10%">
                                                <input matInput type="text" formControlName="value" placeholder="Value" />
                                            </mat-form-field>
                                            <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="10%">
                                                <mat-select formControlName="currency" placeholder="Currency" [disableOptionCentering]="true" [compareWith]="compareWithFn">
                                                    <mat-option *ngFor="let item of currencies" [value]="item">
                                                        {{ item.name }}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                            <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="15%">
                                                <mat-select formControlName="recipientType" placeholder="Recipient type" [disableOptionCentering]="true" [compareWith]="compareWithFn">
                                                    <mat-option *ngFor="let item of clientSpecialRateReportUnits" [value]="item">
                                                        {{ item.name }}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                            <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="25%">
                                                <mat-select formControlName="recipient" placeholder="Recipient" [disableOptionCentering]="true" [compareWith]="compareWithFn">
                                                    <mat-option *ngFor="let item of clientSpecialRateSpecifications" [value]="item">
                                                        {{ item.name }}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                            <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="15%">
                                                <mat-select formControlName="frequency" placeholder="Frequency" [disableOptionCentering]="true" [compareWith]="compareWithFn">
                                                    <mat-option *ngFor="let item of currencies" [value]="item">
                                                        {{ item.name }}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                            <div fxFlex="10%" class="u-w--100 text-truncate-ellipsis flex-items-center">
                                                <button mat-flat-button (click)="toggleEditCommissionRow(i)" class="inline-edit-form--btn__save">
                                                    Save
                                                </button>
                                                <button mat-icon-button (click)="removeCommission(i)">
                                                    <mat-icon>clear</mat-icon>
                                                </button>
                                            </div>
                                        </ng-container>
                                        <ng-container *ngIf="!salesMainDataForm.commissions.at(i).get('editable')?.value">
                                            <span fxFlex="15%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesMainDataForm.commissions.at(i).get('type')?.value">
                                                {{salesMainDataForm.commissions.at(i).get('type')?.value}}
                                            </span>
                                            <span fxFlex="10%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesMainDataForm.commissions.at(i).get('value')?.value">
                                                {{salesMainDataForm.commissions.at(i).get('value')?.value}}
                                            </span>
                                            <span fxFlex="10%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesMainDataForm.commissions.at(i).get('currency')?.value?.name">
                                                {{salesMainDataForm.commissions.at(i).get('currency')?.value?.name}}
                                            </span>
                                            <span fxFlex="15%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesMainDataForm.commissions.at(i).get('recipientType')?.value?.name">
                                                {{salesMainDataForm.commissions.at(i).get('recipientType')?.value?.name}}
                                            </span>
                                            <span fxFlex="25%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesMainDataForm.commissions.at(i).get('recipient')?.value?.name">
                                                {{salesMainDataForm.commissions.at(i).get('recipient')?.value?.name}}
                                            </span>
                                            <span fxFlex="15%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesMainDataForm.commissions.at(i).get('frequency')?.value?.name">
                                                {{salesMainDataForm.commissions.at(i).get('frequency')?.value?.name}}
                                            </span>
                                            <div fxFlex="10%" fxLayoutAlign="center center" class="u-w--100">
                                                <button mat-icon-button (click)="$event.stopPropagation();" [matMenuTriggerFor]="commissionMenu" class="three-dots-actions-btn">
                                                    <mat-icon>more_horiz</mat-icon>
                                                </button>
                                                <mat-menu #commissionMenu>
                                                    <button
                                                        class="menu-item"
                                                        [ngClass]="salesMainDataForm.commissions.at(i).get('editable')?.value ? 'menu-item--add': 'menu-item--edit'"
                                                        mat-menu-item
                                                        [disabled]="false"
                                                        (click)="toggleEditCommissionRow(i)">
                                                        <mat-icon>{{salesMainDataForm.commissions.at(i).get('editable')?.value ? 'save' : 'create'}}</mat-icon>
                                                        {{salesMainDataForm.commissions.at(i).get('editable')?.value ? 'Save' : 'Edit'}}
                                                    </button>
                                                    <button
                                                        class="menu-item menu-item--cancel"
                                                        mat-menu-item
                                                        (click)="removeCommission(i)">
                                                        <mat-icon>clear</mat-icon>
                                                        Remove
                                                    </button>
                                                </mat-menu>
                                            </div>
                                        </ng-container>
                                    </div>
                                </ng-container>

                                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                                    <button color="primary" class="u-mt--10 button-outlined" mat-flat-button (click)="addCommission()">Add commission</button>
                                </div>
                        </div>
                        <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
                        <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                            <h2 class="workflow-section--header">Account manager</h2>
                            <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                                <mat-form-field appearance="outline" class="u-w--100  filter-select u-mr--16" fxFlex="33%">
                                    <mat-label>Sales Account Manager</mat-label>
                                    <input #accountManagerFilterInput type="text" matInput [matAutocomplete]="managerAutocomplete" formControlName="salesAccountManagerIdValue" (click)="$event.stopPropagation()" placeholder="Select account manager(s)">
                                </mat-form-field>
                                <mat-autocomplete #managerAutocomplete="matAutocomplete" [displayWith]="displayNameFn">
                                    <ng-container>
                                        <mat-option *ngFor="let manager of filteredSalesAccountManagers"
                                            [value]="manager"
                                            [ngClass]="{ 'no-data': manager.id === 'no-data' }">
                                            <span>{{ manager.name }}</span>
                                        </mat-option>
                                    </ng-container>
                                </mat-autocomplete>

                                <mat-form-field appearance="outline" class="u-w--100  filter-select" fxFlex="33%">
                                    <mat-label>Commission Account Manager</mat-label>
                                    <input #accountManagerFilterInput type="text" matInput [matAutocomplete]="managerAutocomplete" formControlName="commissionAccountManagerIdValue" (click)="$event.stopPropagation()" placeholder="Select account manager(s)">
                                </mat-form-field>
                                <mat-autocomplete #managerAutocomplete="matAutocomplete" [displayWith]="displayNameFn">
                                    <ng-container>
                                        <mat-option *ngFor="let manager of filteredCommisionAccountManagers"
                                            [value]="manager"
                                            [ngClass]="{ 'no-data': manager.id === 'no-data' }">
                                            <span>{{ manager.name }}</span>
                                        </mat-option>
                                    </ng-container>
                                </mat-autocomplete>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                                <mat-form-field appearance="outline" class="u-w--100  filter-select u-mr--16" fxFlex="33%">
                                    <mat-label>Contract expiration notification</mat-label>
                                    <mat-select formControlName="contractExpirationNotification" [disableOptionCentering]="true" [multiple]="true">
                                        <mat-option *ngFor="let item of contractExpirationNotificationDuration" [value]="item.id">
                                            {{ item.name }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <mat-form-field appearance="outline" fxFlex="33%">
                                    <mat-label>Contract expiration notification date</mat-label>
                                    <input autocomplete="off" matInput
                                            [matDatepicker]="customContractExpirationNotificationDatePicker"
                                            name="customContractExpirationNotificationDate" formControlName="customContractExpirationNotificationDate"
                                            (focus)="customContractExpirationNotificationDatePicker.open()"
                                            (click)="customContractExpirationNotificationDatePicker.open()" readonly>
                                    <mat-icon class="calendar-icon" matSuffix svgIcon="calendar"></mat-icon>
                                    <mat-datepicker #customContractExpirationNotificationDatePicker></mat-datepicker>
                                </mat-form-field>
                            </div>

                            <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                                <mat-form-field appearance="outline" class="u-w--100 textarea-input " fxFlex="0 0 calc(66% + 16px)">
                                    <mat-label>Remarks</mat-label>
                                    <textarea matInput autocomplete="new-password" name="remarks" formControlName="remarks">
                                    </textarea>
                                </mat-form-field>
                            </div>
                            <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100">
                                <mat-checkbox color="accent" formControlName="noRemarks" name="noRemarks" class="black-checkbox" (change)="disableOrEnableInput(salesMainDataForm?.noRemarks?.value, salesMainDataForm?.remarks)">
                                    None
                                </mat-checkbox>
                            </div>
                        </div>
                    </div>
                </ng-template>
            </form>
            <ng-container *ngIf="(activeSideSection !== workflowSideSections.StartConsultantPeriod) && (activeSideSection !== workflowSideSections.ChangeConsultantPeriod) && (activeSideSection !== workflowSideSections.ExtendConsultantPeriod)">
                <form [formGroup]="salesClientDataForm" id="clientData" class="workflow-form workflow-form--client u-w--100">
                    <div fxLayout="column" fxLayoutAlign="start start" class="workflow-sales--process-data u-w--100">
                        <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                            <h1 class="workflow-section--header-main">Client data</h1>
                            <h2 class="workflow-section--header">Client</h2>
                            <ng-container *ngIf="activeSideSection === workflowSideSections.StartClientPeriod">
                                <h3 class="workflow-gray--header u-mb--10">Client relation</h3>
                                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                                    <mat-button-toggle-group class="workflow-toggle-buttons" formControlName="differentEndClient">
                                        <mat-button-toggle [value]="item.value" *ngFor="let item of [{name: 'Direct Client', value: true}, {name: 'Different end-client', value: false}]">
                                            {{ item.name }}
                                        </mat-button-toggle>
                                    </mat-button-toggle-group>
                                </div>
                                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                                    <mat-form-field appearance="outline" class="u-w--100  filter-select" fxFlex="0 0 calc(66% + 16px)">
                                        <mat-label>Customer</mat-label>
                                        <mat-select formControlName="directClientIdValue" [disableOptionCentering]="true">
                                            <mat-option *ngFor="let item of currencies" [value]="item.id">
                                                {{ item.name }}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10" *ngIf="salesClientDataForm?.differentEndClient?.value === false">
                                    <mat-form-field appearance="outline" class="u-w--100  filter-select" fxFlex="0 0 calc(66% + 16px)">
                                        <mat-label>End Customer</mat-label>
                                        <mat-select formControlName="endClientIdValue" [disableOptionCentering]="true">
                                            <mat-option *ngFor="let item of currencies" [value]="item.id">
                                                {{ item.name }}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </ng-container>

                            <ng-container *ngIf="activeSideSection === workflowSideSections.ExtendClientPeriod || activeSideSection === workflowSideSections.ChangeClientPeriod">
                                <div fxLayout="column" fxLayoutAlign="start start" fxLayoutGap="20px" class="u-w--100 u-mb--20" fxFlex="80%">
                                    <div fxLayout="column">
                                        <h3 class="workflow-extension--gray-header">Client relation</h3>
                                        <span class="workflow-extension--blue-text">
                                            <!-- {{salesMainDataForm?.projectType?.value?.name}} -->
                                            Different end-client
                                        </span>
                                    </div>
                                    <div fxLayout="column">
                                        <h3 class="workflow-extension--gray-header">Direct client - name + address</h3>
                                        <span class="workflow-extension--blue-text">
                                            <!-- {{salesMainDataForm?.salesType?.value?.name}} -->
                                            Some Client Name (Address 210/53)
                                        </span>
                                    </div>
                                    <div fxLayout="column">
                                        <h3 class="workflow-extension--gray-header">End-client  - name + address</h3>
                                        <span class="workflow-extension--blue-text">
                                            <!-- {{salesMainDataForm?.deliveryType?.value?.name}} -->
                                            Some Client Name (Address 210/53)
                                        </span>
                                    </div>
                                </div>
                            </ng-container>
                        </div>
                        <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
                        <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                            <h2 class="workflow-section--header">Duration</h2>
                            <h3 class="workflow-gray--header u-mb--10">Project duration</h3>
                            <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10">
                                <div>
                                    <mat-form-field appearance="outline" class="u-mr--16">
                                        <mat-label>Start date</mat-label>
                                        <input autocomplete="off" matInput
                                                [matDatepicker]="clientContractStartDatePicker"
                                                name="clientContractStartDate" formControlName="clientContractStartDate"
                                                (focus)="clientContractStartDatePicker.open()"
                                                (click)="clientContractStartDatePicker.open()" readonly>
                                        <mat-icon class="calendar-icon" matSuffix svgIcon="calendar"></mat-icon>
                                        <mat-datepicker #clientContractStartDatePicker></mat-datepicker>
                                    </mat-form-field>
                                </div>
                                <div>
                                    <mat-form-field appearance="outline" class="u-mr--16">
                                        <mat-label>End date</mat-label>
                                        <input autocomplete="off" matInput
                                                [matDatepicker]="clientContractEndDatePicker"
                                                name="clientContractEndDate" formControlName="clientContractEndDate"
                                                (focus)="clientContractEndDatePicker.open()"
                                                (click)="clientContractEndDatePicker.open()" readonly>
                                        <mat-icon class="calendar-icon" matSuffix svgIcon="calendar"></mat-icon>
                                        <mat-datepicker #clientContractEndDatePicker></mat-datepicker>
                                    </mat-form-field>
                                </div>

                                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                                    <mat-checkbox color="accent" formControlName="clientContractNoEndDate" name="clientContractNoEndDate" class="black-checkbox" (change)="disableOrEnableInput(salesClientDataForm?.clientContractNoEndDate?.value, salesClientDataForm?.clientContractEndDate)">
                                        No end date
                                    </mat-checkbox>
                                </div>
                            </div>

                            <h3 class="workflow-gray--header u-mb--10">Option to extend</h3>
                            <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                                <mat-button-toggle-group class="workflow-toggle-buttons" formControlName="noClientExtensionOption">
                                    <mat-button-toggle [value]="false">
                                        Option to extend
                                    </mat-button-toggle>
                                    <mat-button-toggle [value]="true">
                                        No option
                                    </mat-button-toggle>
                                </mat-button-toggle-group>
                            </div>

                            <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10" *ngIf="salesClientDataForm?.noClientExtensionOption?.value">
                                <mat-form-field appearance="outline" class="filter-select u-mr--16">
                                    <mat-label> Duration</mat-label>
                                    <mat-select formControlName="clientExtensionDuration" [disableOptionCentering]="true">
                                        <mat-option *ngFor="let item of invoicingTimes" [value]="item.id">
                                            {{ item.name }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>

                                <mat-form-field appearance="outline" class="filter-select u-mr--16">
                                    <mat-label> Deadline</mat-label>
                                    <mat-select formControlName="clientExtensionDeadline" [disableOptionCentering]="true">
                                        <mat-option *ngFor="let item of clientExtensionDeadlines" [value]="item.id">
                                            {{ item.name }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>

                                <!-- FIXME: change ngIf when real data will be available -->
                                <mat-form-field appearance="outline" *ngIf="salesClientDataForm?.clientExtensionDeadline?.value === 'Specific date'">
                                    <mat-label>Specific date</mat-label>
                                    <input autocomplete="off" matInput
                                            [matDatepicker]="clientExtensionEndDatePicker"
                                            name="clientExtensionEndDate" formControlName="clientExtensionEndDate"
                                            (focus)="clientExtensionEndDatePicker.open()"
                                            (click)="clientExtensionEndDatePicker.open()" readonly>
                                    <mat-icon class="calendar-icon" matSuffix svgIcon="calendar"></mat-icon>
                                    <mat-datepicker #clientExtensionEndDatePicker></mat-datepicker>
                                </mat-form-field>
                            </div>
                        </div>
                        <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
                        <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                            <h2 class="workflow-section--header">Project</h2>
                            <h3 class="workflow-gray--header u-mb--10">Shared Cap on Time Reporting</h3>
                            <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                                <mat-button-toggle-group class="workflow-toggle-buttons" formControlName="capOnTimeReporting">
                                    <mat-button-toggle *ngFor="let item of clientTimeReportingCap" [value]="item">
                                        {{ item.name }}
                                    </mat-button-toggle>
                                </mat-button-toggle-group>
                            </div>

                            <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                                <mat-form-field appearance="outline" class="u-w--100  u-mr--16" fxFlex="0 0 calc(16.5% - 8px)">
                                    <mat-label>Max value</mat-label>
                                    <input autocomplete="off" matInput formControlName="capOnTimeReportingValue" type="text">
                                </mat-form-field>
                            </div>
                        </div>
                        <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
                        <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                            <h2 class="workflow-section--header">Invoicing</h2>
                            <h3 class="workflow-gray--header u-mb--10">Invoicing Entity</h3>
                            <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10">
                                <mat-form-field appearance="outline" class="u-w--100  filter-select" fxFlex="33%">
                                    <mat-label>ProData entity</mat-label>
                                    <mat-select formControlName="pdcInvoicingEntityId" [disableOptionCentering]="true">
                                        <mat-option *ngFor="let item of [0,1,2,3]" [value]="item">
                                            {{ item }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <h3 class="workflow-gray--header u-mb--10">Price</h3>
                            <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                                <mat-button-toggle-group class="workflow-toggle-buttons" formControlName="clientRateAndInvoicing" (change)="clientRateTypeChange($event.value)">
                                    <mat-button-toggle [value]="item" *ngFor="let item of clientRateTypes">
                                        {{ item.name }}
                                    </mat-button-toggle>
                                </mat-button-toggle-group>
                            </div>
                            <div class="u-w--100" [ngSwitch]="salesClientDataForm.clientRateAndInvoicing?.value?.name">
                                <ng-container *ngSwitchCase="'Time based'">
                                    <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                                        <mat-form-field appearance="outline" class="u-w--100  u-mr--16" fxFlex="0 0 calc(16.5% - 8px)">
                                            <mat-label>Price</mat-label>
                                            <input autocomplete="off" matInput formControlName="clientPrice" type="text">
                                        </mat-form-field>

                                        <mat-form-field appearance="outline" class="u-w--100  filter-select u-mr--16" fxFlex="0 0 calc(16.5% - 8px)">
                                            <mat-label>Unit type</mat-label>
                                            <mat-select formControlName="rateUnitTypeId" [disableOptionCentering]="true">
                                                <mat-option *ngFor="let item of rateUnitTypes" [value]="item.id">
                                                    {{ item.name }}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>

                                        <mat-form-field appearance="outline" class="u-w--100  filter-select" fxFlex="0 0 calc(16.5% - 8px)">
                                            <mat-label>Currency</mat-label>
                                            <mat-select formControlName="clientCurrency" [disableOptionCentering]="true">
                                                <mat-option *ngFor="let item of currencies" [value]="item.id">
                                                    {{ item.name }}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                                </ng-container>
                                <ng-container *ngSwitchCase="'Fixed'">
                                    <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                                        <mat-form-field appearance="outline" class="u-w--100  u-mr--16" fxFlex="33%">
                                            <mat-label>Price</mat-label>
                                            <input autocomplete="off" matInput formControlName="clientPrice" type="text">
                                        </mat-form-field>

                                        <mat-form-field appearance="outline" class="u-w--100  filter-select" fxFlex="33%">
                                            <mat-label>Currency</mat-label>
                                            <mat-select formControlName="clientCurrency" [disableOptionCentering]="true">
                                                <mat-option *ngFor="let item of currencies" [value]="item.id">
                                                    {{ item.name }}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                    </div>
                                </ng-container>
                                <ng-container *ngSwitchCase="'Milestones'">
                                    Milestones
                                </ng-container>
                                <ng-container *ngSwitchDefault>
                                </ng-container>
                            </div>

                            <h3 class="workflow-gray--header u-mb--10">Invoicing information</h3>
                            <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10">
                                <mat-form-field appearance="outline" class="filter-select u-mr--16" fxFlex="33%">
                                    <mat-label>Invoicing currency</mat-label>
                                    <mat-select formControlName="clientInvoiceCurrency" [disableOptionCentering]="true">
                                        <mat-option *ngFor="let item of currencies" [value]="item.id">
                                            {{ item.name }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>

                                <mat-form-field appearance="outline" class="u-w--100  filter-select" fxFlex="33%" [ngClass]="{'u-mr--16': salesClientDataForm.clientInvoiceFrequency?.value?.name === 'Contract end date'}">
                                    <mat-label>Invoicing frequency</mat-label>
                                    <mat-select formControlName="clientInvoiceFrequency" [disableOptionCentering]="true" [compareWith]="compareWithFn">
                                        <mat-option *ngFor="let item of invoicingTimes" [value]="item">
                                            {{ item.name }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>

                                <mat-form-field *ngIf="salesClientDataForm.clientInvoiceFrequency?.value?.name === 'Contract end date'" appearance="outline" class="" fxFlex="33%">
                                    <mat-label>Date</mat-label>
                                    <input autocomplete="off" matInput
                                            [matDatepicker]="clientInvoicingDateDatePicker"
                                            name="clientInvoicingDate" formControlName="clientInvoicingDate"
                                            (focus)="clientInvoicingDateDatePicker.open()"
                                            (click)="clientInvoicingDateDatePicker.open()" readonly>
                                    <mat-icon class="calendar-icon" matSuffix svgIcon="calendar"></mat-icon>
                                    <mat-datepicker #clientInvoicingDateDatePicker></mat-datepicker>
                                </mat-form-field>
                            </div>

                            <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                                <mat-form-field appearance="outline" class="u-w--100 " fxFlex="33%">
                                    <mat-label>Invoicing Reference Number</mat-label>
                                    <input autocomplete="off" matInput formControlName="invoicingReferenceNumber" type="text">
                                </mat-form-field>
                            </div>

                            <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10">
                                <mat-form-field appearance="outline" class="u-w--100 filter-select u-mr--16" fxFlex="33%">
                                    <mat-label>Client Invoicing Recipient</mat-label>
                                    <mat-select formControlName="clientInvoicingRecipientIdValue" [disableOptionCentering]="true">
                                        <mat-option *ngFor="let item of [0,1,2,3]" [value]="item">
                                            {{ item }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10">
                                    <mat-checkbox color="accent" formControlName="clientInvoicingRecipientSameAsDirectClient" name="clientInvoicingRecipientSameAsDirectClient" class="black-checkbox u-mr--10">
                                        Same as direct client
                                    </mat-checkbox>
                                </div>
                            </div>

                            <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10">
                                <mat-form-field appearance="outline" class="u-w--100 filter-select u-mr--16" fxFlex="33%">
                                    <mat-label>Invoicing Reference Person</mat-label>
                                    <mat-select formControlName="invoicingReferencePersonIdValue" [disableOptionCentering]="true">
                                        <mat-option *ngFor="let item of [0,1,2,3]" [value]="item">
                                            {{ item }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10">
                                    <mat-checkbox color="accent" formControlName="noInvoicingReferencePerson" name="noInvoicingReferencePerson" class="black-checkbox u-mr--10" (change)="disableOrEnableInput(salesClientDataForm?.noInvoicingReferencePerson?.value, salesClientDataForm?.invoicingReferencePersonIdValue)">
                                        None
                                    </mat-checkbox>
                                </div>
                            </div>
                        </div>
                        <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
                        <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                            <h2 class="workflow-section--header">Rates and fees</h2>

                            <div class="inline-edit-form u-w--100">
                                <div fxLayout="row" fxLayoutAlign="space-between start" fxLayoutGap="10px" class="workflow-sales-inline--form__header-container u-w--100" *ngIf="salesClientDataForm.clientRates?.controls?.length">
                                    <span fxFlex="25%" class="workflow-sales-inline--form__header u-w--100">
                                        Rate name
                                    </span>
                                    <!-- <span fxFlex="10%" class="workflow-sales-inline--form__header u-w--100">
                                        Name for invoices
                                    </span> -->
                                    <span fxFlex="25%" class="workflow-sales-inline--form__header u-w--100">
                                        Rate direction
                                    </span>
                                    <span fxFlex="20%" class="workflow-sales-inline--form__header u-w--100">
                                        Reporting unit
                                    </span>
                                    <!-- <span fxFlex="10%" class="workflow-sales-inline--form__header u-w--100">
                                        Rate specified as
                                    </span> -->
                                    <span fxFlex="20%" class="workflow-sales-inline--form__header u-w--100">
                                        Client rate
                                    </span>
                                    <!-- <span fxFlex="10%" class="workflow-sales-inline--form__header u-w--100">
                                        ProData rate
                                    </span>
                                    <span fxFlex="10%" class="workflow-sales-inline--form__header u-w--100">
                                        Consultant rate
                                    </span>
                                    <span fxFlex="10%" class="workflow-sales-inline--form__header u-w--100">
                                        Category
                                    </span> -->
                                    <span fxFlex="10%" class="workflow-sales-inline--form__header u-w--100">

                                    </span>
                                </div>
                                <ng-container formArrayName="clientRates" class="u-w--100">
                                    <div fxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="10px" class="workflow-sales-inline--form__row u-w--100"
                                        *ngFor="let rate of salesClientDataForm.clientRates.controls; index as i"
                                        [formArrayName]="i">
                                        <ng-container *ngIf="salesClientDataForm.clientRates.at(i).get('editable')?.value">
                                            <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="25%">
                                                <input matInput type="text" formControlName="rateName" placeholder="Rate name" />
                                            </mat-form-field>
                                            <!-- <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="10%">
                                                <input matInput type="text" formControlName="nameForInvoices" placeholder="Name for invoicing" />
                                            </mat-form-field> -->
                                            <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="25%">
                                                <mat-select formControlName="rateDirection" placeholder="Rate direction" [disableOptionCentering]="true" [compareWith]="compareWithFn">
                                                    <mat-option *ngFor="let item of clientSpecialRateOrFeeDirections" [value]="item">
                                                        {{ item.name }}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                            <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="20%">
                                                <mat-select formControlName="reportingUnit" placeholder="Reporting Unit" [disableOptionCentering]="true" [compareWith]="compareWithFn">
                                                    <mat-option *ngFor="let item of clientSpecialRateReportUnits" [value]="item">
                                                        {{ item.name }}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                            <!-- <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="10%">
                                                <mat-select formControlName="rateSpecifiedAs" placeholder="Rate specified as" [disableOptionCentering]="true" [compareWith]="compareWithFn">
                                                    <mat-option *ngFor="let item of clientSpecialRateSpecifications" [value]="item">
                                                        {{ item.name }}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field> -->
                                            <div fxFlex="20%" fxLayout="row" fxLayoutAlign="start start">
                                                <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="40%">
                                                    <input matInput type="text" placeholder="Rate" formControlName="clientRateValue">
                                                </mat-form-field>
                                                <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="60%">
                                                    <mat-select formControlName="clientRateCurrency" placeholder="Currency" [disableOptionCentering]="true" [compareWith]="compareWithFn">
                                                        <mat-option *ngFor="let item of currencies" [value]="item">
                                                            {{ item.name }}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <!-- <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="10%">
                                                <input matInput type="text" formControlName="proDataRate" placeholder="ProData rate" />
                                            </mat-form-field>
                                            <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="10%">
                                                <input matInput type="text" formControlName="consultantRate" placeholder="Consultant rate" />
                                            </mat-form-field> -->
                                            <!-- <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="10%">
                                                <mat-select formControlName="category" placeholder="Category" [disableOptionCentering]="true">
                                                    <mat-option *ngFor="let item of [0,1,2,3]" [value]="item">
                                                        {{ item }}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field> -->
                                            <div fxFlex="10%" class="u-w--100 text-truncate-ellipsis flex-items-center">
                                                <button mat-flat-button (click)="editOrSaveSpecialRate(salesClientDataForm?.clientRates?.at(i)?.get('editable')?.value, i)" class="inline-edit-form--btn__save">
                                                    Save
                                                </button>
                                                <button mat-icon-button (click)="removeClientRate(i)">
                                                    <mat-icon>clear</mat-icon>
                                                </button>
                                            </div>
                                        </ng-container>
                                        <ng-container *ngIf="!salesClientDataForm.clientRates.at(i).get('editable')?.value">
                                            <span fxFlex="25%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesClientDataForm.clientRates.at(i).get('rateName')?.value">
                                                {{salesClientDataForm.clientRates.at(i).get('rateName')?.value}}
                                            </span>
                                            <!-- <span fxFlex="10%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesClientDataForm.clientRates.at(i).get('nameForInvoices')?.value">
                                                {{salesClientDataForm.clientRates.at(i).get('nameForInvoices')?.value}}
                                            </span> -->
                                            <span fxFlex="25%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesClientDataForm.clientRates.at(i).get('rateDirection')?.value?.name">
                                                {{salesClientDataForm.clientRates.at(i).get('rateDirection')?.value?.name}}
                                            </span>
                                            <span fxFlex="20%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesClientDataForm.clientRates.at(i).get('reportingUnit')?.value?.name">
                                                {{salesClientDataForm.clientRates.at(i).get('reportingUnit')?.value?.name}}
                                            </span>
                                            <!-- <span fxFlex="10%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesClientDataForm.clientRates.at(i).get('rateSpecifiedAs')?.value?.name">
                                                {{salesClientDataForm.clientRates.at(i).get('rateSpecifiedAs')?.value?.name}}
                                            </span> -->
                                            <span fxFlex="20%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesClientDataForm.clientRates.at(i).get('clientRateValue')?.value + ' ' + salesClientDataForm.clientRates.at(i).get('clientRateCurrency')?.value?.name">
                                                {{salesClientDataForm.clientRates.at(i).get('clientRateValue')?.value || salesClientDataForm.clientRates.at(i).get('clientRateCurrency')?.value?.name ?
                                                salesClientDataForm.clientRates.at(i).get('clientRateValue')?.value + ' ' + salesClientDataForm.clientRates.at(i).get('clientRateCurrency')?.value?.name : '-'}}
                                            </span>
                                            <!-- <span fxFlex="10%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesClientDataForm.clientRates.at(i).get('proDataRate')?.value">
                                                {{salesClientDataForm.clientRates.at(i).get('proDataRate')?.value}}
                                            </span>
                                            <span fxFlex="10%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesClientDataForm.clientRates.at(i).get('consultantRate')?.value">
                                                {{salesClientDataForm.clientRates.at(i).get('consultantRate')?.value}}
                                            </span> -->
                                            <!-- <span fxFlex="10%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesClientDataForm.clientRates.at(i).get('category')?.value?.name">
                                                {{salesClientDataForm.clientRates.at(i).get('category')?.value?.name}}
                                            </span> -->
                                            <div fxFlex="10%" fxLayoutAlign="center center" class="u-w--100">
                                                <button mat-icon-button (click)="$event.stopPropagation();" [matMenuTriggerFor]="clientRateMenu" class="three-dots-actions-btn">
                                                    <mat-icon>more_horiz</mat-icon>
                                                </button>
                                                <mat-menu #clientRateMenu>
                                                    <button
                                                        class="menu-item"
                                                        [ngClass]="salesClientDataForm.clientRates.at(i).get('editable')?.value ? 'menu-item--add': 'menu-item--edit'"
                                                        mat-menu-item
                                                        [disabled]="false"
                                                        (click)="editOrSaveSpecialRate(salesClientDataForm?.clientRates?.at(i)?.get('editable')?.value, i)">
                                                        <mat-icon>{{salesClientDataForm.clientRates.at(i).get('editable')?.value ? 'save' : 'create'}}</mat-icon>
                                                        {{salesClientDataForm.clientRates.at(i).get('editable')?.value ? 'Save' : 'Edit'}}
                                                    </button>
                                                    <button
                                                        class="menu-item menu-item--cancel"
                                                        mat-menu-item
                                                        (click)="removeClientRate(i)">
                                                        <mat-icon>clear</mat-icon>
                                                        Delete
                                                    </button>
                                                </mat-menu>
                                            </div>
                                        </ng-container>
                                    </div>
                                </ng-container>
                            </div>

                            <div fxLayout="row" fxLayoutAlign="start start" class="u-mb--10">
                                <button [ngClass]="salesClientDataForm!.clientRates!.controls!.length > 0 ? 'button-add' : 'button-outlined'" class="rates-and-fees--btn" mat-flat-button (click)="addSpecialRate()">
                                    <mat-icon *ngIf="salesClientDataForm.clientRates?.controls?.length">add</mat-icon>
                                    Add special rates
                                </button>
                            </div>

                            <div class="inline-edit-form u-w--100">
                                <div fxLayout="row" fxLayoutAlign="space-between start" fxLayoutGap="10px" class="workflow-sales-inline--form__header-container u-w--100" *ngIf="salesClientDataForm.clientFees?.controls?.length">
                                    <span fxFlex="25%" class="workflow-sales-inline--form__header u-w--100">
                                        Fee name
                                    </span>
                                    <!-- <span fxFlex="10%" class="workflow-sales-inline--form__header u-w--100">
                                        Name for invoices
                                    </span> -->
                                    <span fxFlex="25%" class="workflow-sales-inline--form__header u-w--100">
                                        Fee direction
                                    </span>
                                    <span fxFlex="20%" class="workflow-sales-inline--form__header u-w--100">
                                        Frequency
                                    </span>
                                    <!-- <span fxFlex="12%" class="workflow-sales-inline--form__header u-w--100">
                                        Fee specified as
                                    </span> -->
                                    <span fxFlex="20%" class="workflow-sales-inline--form__header u-w--100">
                                        Client fee
                                    </span>
                                    <!-- <span fxFlex="12%" class="workflow-sales-inline--form__header u-w--100">
                                        ProData fee
                                    </span>
                                    <span fxFlex="12%" class="workflow-sales-inline--form__header u-w--100">
                                        Consultant fee
                                    </span> -->
                                    <span fxFlex="10%" class="workflow-sales-inline--form__header u-w--100">

                                    </span>
                                </div>
                                <ng-container formArrayName="clientFees" class="u-w--100">
                                    <div fxLayout="row" fxLayoutAlign="space-between center" fxLayoutGap="10px" class="workflow-sales-inline--form__row u-w--100"
                                        *ngFor="let rate of salesClientDataForm.clientFees.controls; index as i"
                                        [formArrayName]="i">
                                        <ng-container *ngIf="salesClientDataForm.clientFees.at(i).get('editable')?.value">
                                            <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="25%">
                                                <input matInput type="text" formControlName="feeName" placeholder="Fee name" />
                                            </mat-form-field>
                                            <!-- <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="10%">
                                                <input matInput type="text" formControlName="nameForInvoices" placeholder="Name for invoicing" />
                                            </mat-form-field> -->
                                            <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="25%">
                                                <mat-select formControlName="feeDirection" placeholder="Fee direction" [disableOptionCentering]="true" [compareWith]="compareWithFn">
                                                    <mat-option *ngFor="let item of clientSpecialRateOrFeeDirections" [value]="item">
                                                        {{ item.name }}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                            <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="20%">
                                                <mat-select formControlName="feeFrequency" placeholder="Frequency" [disableOptionCentering]="true" [compareWith]="compareWithFn">
                                                    <mat-option *ngFor="let item of clientSpecialFeeFrequencies" [value]="item">
                                                        {{ item.name }}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field>
                                            <!-- <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="12%">
                                                <mat-select formControlName="feeSpecifiedAs" placeholder="Fee specified as" [disableOptionCentering]="true" [compareWith]="compareWithFn">
                                                    <mat-option *ngFor="let item of clientSpecialFeeSpecifications" [value]="item">
                                                        {{ item.name }}
                                                    </mat-option>
                                                </mat-select>
                                            </mat-form-field> -->
                                            <div fxFlex="20%" fxLayout="row" fxLayoutAlign="start start">
                                                <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="40%">
                                                    <input matInput type="text" placeholder="Rate" formControlName="clientRateValue">
                                                </mat-form-field>
                                                <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="60%">
                                                    <mat-select formControlName="clientRateCurrency" placeholder="Currency" [disableOptionCentering]="true" [compareWith]="compareWithFn">
                                                        <mat-option *ngFor="let item of currencies" [value]="item">
                                                            {{ item.name }}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                            <!-- <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="12%">
                                                <input matInput type="text" formControlName="proDataRate" placeholder="ProData rate" />
                                            </mat-form-field>
                                            <mat-form-field appearance="fill" class="u-w--100 formFieldNoMarginPadding filter-select" fxFlex="12%">
                                                <input matInput type="text" formControlName="consultantRate" placeholder="Consultant rate" />
                                            </mat-form-field> -->
                                            <div fxFlex="10%" class="u-w--100 text-truncate-ellipsis flex-items-center">
                                                <button mat-flat-button (click)="editOrSaveClientFee(salesClientDataForm.clientFees.at(i).get('editable')?.value, i)" class="inline-edit-form--btn__save">
                                                    Save
                                                </button>
                                                <button mat-icon-button (click)="removeClientFee(i)">
                                                    <mat-icon>clear</mat-icon>
                                                </button>
                                            </div>
                                        </ng-container>
                                        <ng-container *ngIf="!salesClientDataForm.clientFees.at(i).get('editable')?.value">
                                            <span fxFlex="25%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesClientDataForm.clientFees.at(i).get('rateName')?.value ?? '-'">
                                                {{salesClientDataForm.clientFees.at(i).get('rateName')?.value ?? '-'}}
                                            </span>
                                            <!-- <span fxFlex="10%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesClientDataForm.clientFees.at(i).get('nameForInvoices')?.value ?? '-'">
                                                {{salesClientDataForm.clientFees.at(i).get('nameForInvoices')?.value ?? '-'}}
                                            </span> -->
                                            <span fxFlex="25%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesClientDataForm.clientFees.at(i).get('feeDirection')?.value?.name ?? '-'">
                                                {{salesClientDataForm.clientFees.at(i).get('feeDirection')?.value?.name ?? '-'}}
                                            </span>
                                            <span fxFlex="20%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesClientDataForm.clientFees.at(i).get('feeFrequency')?.value?.name ?? '-'">
                                                {{salesClientDataForm.clientFees.at(i).get('feeFrequency')?.value?.name ?? '-'}}
                                            </span>
                                            <!-- <span fxFlex="12%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesClientDataForm.clientFees.at(i).get('feeSpecifiedAs')?.value?.name ?? '-'">
                                                {{salesClientDataForm.clientFees.at(i).get('feeSpecifiedAs')?.value?.name ?? '-'}}
                                            </span> -->
                                            <span fxFlex="20%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesClientDataForm.clientFees.at(i).get('clientRateValue')?.value + ' ' + salesClientDataForm.clientFees.at(i).get('clientRateCurrency')?.value?.name">
                                                {{salesClientDataForm.clientFees.at(i).get('clientRateValue')?.value || salesClientDataForm.clientFees.at(i).get('clientRateCurrency')?.value?.name ?
                                                salesClientDataForm.clientFees.at(i).get('clientRateValue')?.value + ' ' + salesClientDataForm.clientFees.at(i).get('clientRateCurrency')?.value?.name : '-'}}
                                            </span>
                                            <!-- <span fxFlex="12%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesClientDataForm.clientFees.at(i).get('proDataRate')?.value ?? '-'">
                                                {{salesClientDataForm.clientFees.at(i).get('proDataRate')?.value ?? '-'}}
                                            </span>
                                            <span fxFlex="12%" class="u-w--100 text-truncate-ellipsis" [matTooltip]="salesClientDataForm.clientFees.at(i).get('consultantRate')?.value ?? '-'">
                                                {{salesClientDataForm.clientFees.at(i).get('consultantRate')?.value ?? '-'}}
                                            </span> -->
                                            <div fxFlex="10%" fxLayoutAlign="center center" class="u-w--100">
                                                <button *ngIf="salesClientDataForm.clientFees.at(i).get('editable')?.value"
                                                        mat-icon-button
                                                        [disabled]="false"
                                                        (click)="editOrSaveClientFee(salesClientDataForm.clientFees.at(i).get('editable')?.value, i)">
                                                        <mat-icon>save</mat-icon>
                                                </button>
                                                <button mat-icon-button (click)="$event.stopPropagation();" [matMenuTriggerFor]="clientFeeMenu" class="three-dots-actions-btn">
                                                    <mat-icon>more_horiz</mat-icon>
                                                </button>
                                                <mat-menu #clientFeeMenu>
                                                    <button
                                                        class="menu-item menu-item--edit"
                                                        *ngIf="!salesClientDataForm.clientFees.at(i).get('editable')?.value"
                                                        mat-menu-item
                                                        [disabled]="false"
                                                        (click)="editOrSaveClientFee(salesClientDataForm.clientFees.at(i).get('editable')?.value, i)">
                                                        <mat-icon>create</mat-icon>
                                                        Edit
                                                    </button>
                                                    <button
                                                        class="menu-item menu-item--cancel"
                                                        mat-menu-item
                                                        (click)="removeClientFee(i)">
                                                        <mat-icon>clear</mat-icon>
                                                        Remove
                                                    </button>
                                                </mat-menu>
                                            </div>
                                        </ng-container>
                                    </div>
                                </ng-container>
                            </div>

                            <div fxLayout="row" fxLayoutAlign="start start" class="u-mb--20">
                                <button [ngClass]="salesClientDataForm!.clientFees!.controls!.length > 0 ? 'button-add' : 'button-outlined'" class="rates-and-fees--btn" mat-flat-button (click)="addClientFee()">
                                    <mat-icon *ngIf="salesClientDataForm?.clientFees?.controls?.length">add</mat-icon>
                                    Add special fees
                                </button>
                            </div>
                        </div>
                        <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
                        <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                            <h2 class="workflow-section--header">Evaluation</h2>
                            <h3 class="workflow-gray--header u-mb--10">Client Evaluations</h3>
                            <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                                <mat-button-toggle-group class="workflow-toggle-buttons" formControlName="evaluationsDisabled">
                                    <mat-button-toggle [value]="false">
                                        Enable
                                    </mat-button-toggle>
                                    <mat-button-toggle [value]="true">
                                        Disable
                                    </mat-button-toggle>
                                </mat-button-toggle-group>
                            </div>

                            <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                                <mat-form-field *ngIf="!salesClientDataForm?.value?.evaluationsDisabled" appearance="outline" class="u-w--100  filter-select" fxFlex="33%">
                                    <mat-label>Evaluation Reference Person</mat-label>
                                    <mat-select formControlName="evaluationsReferencePersonIdValue" [disableOptionCentering]="true">
                                        <mat-option *ngFor="let item of [0,1,2,3]" [value]="item">
                                            {{ item }}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>

                                <mat-form-field *ngIf="salesClientDataForm?.value?.evaluationsDisabled" appearance="outline" class="u-w--100 textarea-input " fxFlex="0 0 calc(66% + 16px)">
                                    <mat-label>Disable Evaluations Reason</mat-label>
                                    <textarea matInput autocomplete="new-password" name="evaluationsDisabledReason" formControlName="evaluationsDisabledReason">
                                    </textarea>
                                </mat-form-field>
                            </div>
                        </div>
                        <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>
                        <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                            <h2 class="workflow-section--header">Contract</h2>
                            <h3 class="workflow-gray--header u-mb--10">Special Contract Terms</h3>
                            <div fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="10px" class="u-w--100 u-mb--10">
                                <mat-form-field appearance="outline" class="u-w--100  textarea-input" fxFlex="0 0 calc(66% + 16px)">
                                    <mat-label>Special Contract Terms</mat-label>
                                    <textarea matInput autocomplete="new-password" name="specialContractTerms" formControlName="specialContractTerms">
                                    </textarea>
                                </mat-form-field>
                                <mat-checkbox color="accent" formControlName="noSpecialContractTerms" name="noSpecialContractTerms" class="black-checkbox u-mt--10">
                                    None
                                </mat-checkbox>
                            </div>

                            <h3 class="workflow-gray--header u-mb--10">Client Contract Signers</h3>
                            <div formArrayName="contractSigners" class="u-w--100 u-mb--10">
                                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10" *ngFor="let signer of contractSigners.controls; let i = index" [formGroupName]="i">
                                    <mat-form-field appearance="outline" class="u-w--100 mat-elevation-z0  u-mr--16"  fxFlex="33%">
                                        <mat-label>Name</mat-label>
                                        <input autocomplete="off" matInput formControlName="clientName" type="text">
                                    </mat-form-field>

                                    <mat-form-field appearance="outline" class="u-w--100  filter-select u-mr--16" fxFlex="33%">
                                        <mat-label>Client Role</mat-label>
                                        <mat-select formControlName="clientRole" [disableOptionCentering]="true">
                                            <mat-option *ngFor="let item of [0,1,2,3]" [value]="item">
                                                {{ item }}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>

                                    <mat-form-field appearance="outline" class="u-w--100  filter-select u-mr--16" fxFlex="20%">
                                        <mat-label>Sequence</mat-label>
                                        <mat-select formControlName="clientSequence" [disableOptionCentering]="true">
                                            <mat-option *ngFor="let item of [0,1,2,3]" [value]="item">
                                                {{ item }}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <button class="form-icon--delete-row u-mt--5" mat-icon-button (click)="removeSigner(i)"><mat-icon svgIcon="remove-icon"></mat-icon></button>
                                </div>
                                <button class="button-add" mat-flat-button (click)="addSignerToForm()">
                                    <mat-icon>add</mat-icon>
                                    Add Signer
                                </button>
                            </div>
                        </div>
                    </div>
                    <!-- <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10" *ngIf="clientSpecialRateActive">
                        <mat-form-field appearance="outline" class="u-w--100  u-mr--16" fxFlex="33%">
                            <mat-label>Client Special rates price</mat-label>
                            <input autocomplete="off" matInput formControlName="clientSpecialRatePrice" type="text">
                        </mat-form-field>

                        <mat-form-field appearance="outline" class="u-w--100  filter-select u-mr--16" fxFlex="33%">
                            <mat-label>Currency</mat-label>
                            <mat-select formControlName="clientSpecialRateCurrency" [disableOptionCentering]="true">
                                <mat-option *ngFor="let item of currencies" [value]="item.id">
                                    {{ item.name }}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>

                    <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10">
                        <button mat-raised-button color="primary" class="mat-elevation-z0" fxFlex="20%"
                                [ngClass]="clientSpecialRateActive ? 'button-outlined' : 'button-accept'"
                                (click)="toggleSpecialClientRates()">
                                {{clientSpecialRateActive ? 'Delete Client Special rates' : 'Add Client Special rates'}}
                        </button>
                    </div>

                    <h3 class="workflow-gray--header">Client Fees</h3>

                    <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10" *ngIf="clientSpecialFeesActive">
                        <mat-form-field appearance="outline" class="u-w--100  u-mr--16" fxFlex="33%">
                            <mat-label>Client fees</mat-label>
                            <input autocomplete="off" matInput formControlName="clientFees" type="text">
                        </mat-form-field>

                        <mat-form-field appearance="outline" class="u-w--100  filter-select u-mr--16" fxFlex="33%">
                            <mat-label>Currency</mat-label>
                            <mat-select formControlName="clientFeesCurrency" [disableOptionCentering]="true">
                                <mat-option *ngFor="let item of currencies" [value]="item.id">
                                    {{ item.name }}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>

                    <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10">
                        <button mat-raised-button color="primary" class="mat-elevation-z0" fxFlex="20%"
                                [ngClass]="clientSpecialFeesActive ? 'button-outlined' : 'button-accept'"
                                (click)="toggleClientFees()">
                                {{clientSpecialFeesActive ? 'Delete client fees' : 'Add client fees'}}
                        </button>
                    </div> -->
                </form>
            </ng-container>
            <form [formGroup]="consultantsForm" id="consultantData" class="workflow-form--consultants u-w--100">
                <ng-container formArrayName="consultantData" class="u-mb--20">
                    <div fxLayout="column" fxLayoutAlign="start start" class="workflow-sales--process-data u-w--100">
                        <div *ngFor="let consultant of consultantsForm.consultantData.controls; let i = index" [formGroupName]="i" class="u-w--100">
                            <div fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="30px" class="u-w--100">
                                <h1 class="workflow-section--header-main" fxFlex="15%">Consultant data</h1>
                                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                                    <span fxFlex="50%" fxLayout="row" fxLayoutAlign="start center">
                                        <img class="border-rounded-50 u-ml--16 u-mr--16" src="https://picsum.photos/35/35" />
                                        <span class="workflow-form--consultants__name u-mr--16">
                                            Robertino El'Bartessio
                                        </span>
                                        <button class="form-icon--delete-row" *ngIf="consultantsForm.consultantData?.controls?.length && consultantsForm.consultantData.controls.length > 1"
                                            mat-icon-button (click)="$event.stopPropagation();confirmRemoveConsultant(i)">
                                            <mat-icon svgIcon="remove-icon"></mat-icon>
                                        </button>
                                    </span>

                                    <div fxFlex="50%" fxLayoutAlign="end center">
                                        <span class="workflow-form--consultants__period u-mr--8">
                                            24.10.2021 - 24.11.2021
                                        </span>
                                        <button mat-icon-button (click)="$event.stopPropagation();" [matMenuTriggerFor]="consultantMenu" class="three-dots-actions-btn">
                                            <mat-icon>more_horiz</mat-icon>
                                        </button>
                                        <mat-menu #consultantMenu>
                                            <button
                                                class="menu-item menu-item--edit"
                                                mat-menu-item
                                                [disabled]="false"
                                                (click)="changeConsultantData(i)">
                                                <mat-icon>create</mat-icon>
                                                Change consultant data
                                            </button>
                                            <button
                                                class="menu-item menu-item--edit"
                                                mat-menu-item
                                                [disabled]="false"
                                                (click)="extendConsultant(i)">
                                                <mat-icon>add</mat-icon>
                                                Extend consultant
                                            </button>
                                            <button
                                                class="menu-item menu-item--cancel"
                                                mat-menu-item
                                                (click)="terminateConsultant(i)">
                                                <mat-icon>clear</mat-icon>
                                                Terminate consultant
                                            </button>
                                        </mat-menu>
                                    </div>
                                </div>
                            </div>

                            <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                                <ng-container *ngIf="activeSideSection === workflowSideSections.StartClientPeriod">
                                    <h3 class="workflow-gray--header u-mb--10">Employment type</h3>
                                    <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                                        <mat-button-toggle-group class="workflow-toggle-buttons" formControlName="consultantType">
                                            <!-- <ng-container *ngIf="showMore; else showLess"> -->
                                                <mat-button-toggle *ngFor="let item of consultantTypes" [value]="item.id">
                                                    {{ item.name }}
                                                </mat-button-toggle>
                                            <!-- </ng-container> -->

                                            <!-- <ng-template #showLess>
                                                <mat-button-toggle *ngFor="let item of consultantTypes | slice: 0:3" [value]="item.id">
                                                    {{ item.name }}
                                                </mat-button-toggle>
                                            </ng-template>

                                            <button class="workflow-toggle-buttons--showMore" mat-flat-button (click)="showMore = !showMore">
                                                {{showMore ? '<<' : '>>'}}
                                            </button> -->
                                        </mat-button-toggle-group>
                                    </div>

                                    <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                                        <mat-form-field appearance="outline" class="u-w--100 mat-elevation-z0 " fxFlex="33%">
                                            <mat-label>Consultant Name</mat-label>
                                            <input autocomplete="off" matInput formControlName="consultantName" type="text">
                                        </mat-form-field>
                                    </div>
                                </ng-container>
                                <ng-container *ngIf="activeSideSection === workflowSideSections.ExtendClientPeriod || activeSideSection === workflowSideSections.ChangeClientPeriod">
                                    <div fxLayout="column" class="u-mb--20">
                                        <h3 class="workflow-extension--gray-header">Consultant type</h3>
                                        <span class="workflow-extension--blue-text">
                                            <!-- {{salesMainDataForm?.deliveryType?.value?.name}} -->
                                            Freelance
                                        </span>
                                    </div>

                                    <h3 class="workflow-extension--gray-header">Consultant</h3>
                                    <div fxLayout="row" fxLayoutAlign="start center" class="u-mb--20">
                                        <img class="workflow-extension--consultant-data--consultant-img u-mr--16" src="https://placekitten.com/50/50">
                                        <div fxLayout="column">
                                            <p class="workflow-extension--consultant-data--consultant-name">
                                                <!-- {{contractsConsultantsDataForm.consultantData.at(i).get('consultantName')?.value}} -->
                                                Robertsen Oscar
                                            </p>
                                            <span class="workflow-extension--consultant-data--consultant-text">
                                                Just Do IT | Warsaw, PL | #9876 / PL-06281
                                            </span>
                                        </div>
                                    </div>
                                </ng-container>
                            </div>
                            <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>

                            <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                                <h2 class="workflow-section--header">Contract Duration</h2>
                                <h3 class="workflow-gray--header u-mb--10">Project duration</h3>
                                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                                    <mat-button-toggle-group class="workflow-toggle-buttons" formControlName="consultantProjectDuration">
                                        <mat-button-toggle *ngFor="let item of ['Same as client', 'Different from client']" [value]="item">
                                            {{ item }}
                                        </mat-button-toggle>
                                    </mat-button-toggle-group>
                                </div>

                                <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10">
                                    <mat-form-field appearance="outline" class=" u-mr--16" fxFlex="0 0 calc(16.5% - 8px)">
                                        <mat-label>Start date</mat-label>
                                        <input autocomplete="off" matInput
                                                [matDatepicker]="consultantProjectStartDatePicker"
                                                name="consultantProjectStartDate" formControlName="consultantProjectStartDate"
                                                (focus)="consultantProjectStartDatePicker.open()"
                                                (click)="consultantProjectStartDatePicker.open()" readonly>
                                        <mat-icon class="calendar-icon" matSuffix svgIcon="calendar"></mat-icon>
                                        <mat-datepicker #consultantProjectStartDatePicker></mat-datepicker>
                                    </mat-form-field>

                                    <mat-form-field appearance="outline" class=" u-mr--16" fxFlex="0 0 calc(16.5% - 8px)">
                                        <mat-label>End date</mat-label>
                                        <input autocomplete="off" matInput
                                                [matDatepicker]="consultantProjectEndDatePicker"
                                                name="consultantProjectEndDate" formControlName="consultantProjectEndDate"
                                                (focus)="consultantProjectEndDatePicker.open()"
                                                (click)="consultantProjectEndDatePicker.open()" readonly>
                                        <mat-icon class="calendar-icon" matSuffix svgIcon="calendar"></mat-icon>
                                        <mat-datepicker #consultantProjectEndDatePicker></mat-datepicker>
                                    </mat-form-field>

                                </div>

                                <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--20">
                                    <mat-checkbox color="accent" formControlName="consultantProjectNoEndDate" name="consultantProjectNoEndDate" class="black-checkbox u-mr--16"
                                                  (change)="disableOrEnableInput(consultantsForm.consultantData.at(i).get('consultantProjectNoEndDate')?.value, consultantsForm.consultantData.at(i).get('consultantProjectEndDate'))">
                                        No end date
                                    </mat-checkbox>
                                </div>
                            </div>
                            <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>

                            <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                                <h2 class="workflow-section--header">Consultant Project</h2>

                                <!-- <h3 class="workflow-gray--header u-mb--10">Workplace</h3>
                                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                                    <mat-button-toggle-group class="workflow-toggle-buttons" formControlName="consultantWorkplace">
                                        <mat-button-toggle *ngFor="let item of ['Onsite', 'Remote', 'Mix']" [value]="item">
                                            {{ item }}
                                        </mat-button-toggle>
                                    </mat-button-toggle-group>
                                </div>

                                <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10"
                                    *ngIf="consultantsForm.consultantData.at(i).get('consultantWorkplace')?.value === 'Onsite' || consultantsForm.consultantData.at(i).get('consultantWorkplace')?.value === 'Mix'">
                                    <mat-form-field appearance="outline" class="u-w--100 mat-elevation-z0 " fxFlex="0 0 calc(66% + 16px)">
                                        <mat-label>Main onsite address</mat-label>
                                        <input autocomplete="off" matInput formControlName="consultantWorkplaceOnsite" type="text">
                                    </mat-form-field>
                                </div>

                                <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10"
                                    *ngIf="consultantsForm.consultantData.at(i).get('consultantWorkplace')?.value === 'Remote' || consultantsForm.consultantData.at(i).get('consultantWorkplace')?.value === 'Mix'">
                                    <mat-form-field appearance="outline" class="u-w--100 mat-elevation-z0 "  fxFlex="0 0 calc(66% + 16px)">
                                        <mat-label>Main remote country</mat-label>
                                        <input autocomplete="off" matInput formControlName="consultantWorkplaceRemote" type="text">
                                    </mat-form-field>
                                </div>

                                <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10"
                                    *ngIf="consultantsForm.consultantData.at(i).get('consultantWorkplace')?.value === 'Mix'">
                                    <mat-form-field appearance="outline" class="u-w--100 mat-elevation-z0 " fxFlex="0 0 calc(16% - 8px)">
                                        <mat-label>Percentage onsite</mat-label>
                                        <input autocomplete="off" matInput formControlName="consultantWorkplaceMixPercentage" type="text">
                                    </mat-form-field>
                                </div> -->

                                <!-- sss -->

                                <h3 class="workflow-gray--header u-mb--10">Workplace</h3>

                                <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                                    <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10">
                                        <mat-checkbox color="accent" formControlName="consultantIsOnsiteWorkplace" name="consultantIsOnsiteWorkplace" class="black-checkbox u-mr--16" fxFlex="0 0 calc(16.5% - 8px)">
                                            Onsite
                                        </mat-checkbox>
                                        <ng-container *ngIf="consultantsForm.consultantData.at(i).get('consultantIsOnsiteWorkplace')?.value">
                                            <mat-form-field appearance="outline" class="u-w--100 mat-elevation-z0 u-mr--16" fxFlex="0 0 calc(33% + 16px)">
                                                <mat-label>Client address</mat-label>
                                                <input autocomplete="off" matInput formControlName="consultantWorkplaceCliendAddress" type="text">
                                            </mat-form-field>

                                            <mat-form-field appearance="outline" class="u-w--100 mat-elevation-z0 " fxFlex="0 0 calc(16% - 8px)">
                                                <mat-label>Add value %</mat-label>
                                                <input autocomplete="off" matInput formControlName="consultantWorkplacePercentageOnSite" type="text">
                                            </mat-form-field>
                                        </ng-container>
                                    </div>
                                    <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10">
                                        <mat-checkbox color="accent" formControlName="consultantIsEmagineOfficeWorkplace" name="consultantIsEmagineOfficeWorkplace" class="black-checkbox u-mr--16" fxFlex="0 0 calc(16.5% - 8px)">
                                            PDC Office
                                        </mat-checkbox>
                                        <mat-form-field appearance="outline" class="u-w--100 mat-elevation-z0 " fxFlex="0 0 calc(33% + 16px)" *ngIf="consultantsForm.consultantData.at(i).get('consultantIsEmagineOfficeWorkplace')?.value">
                                            <mat-label>PDC Office address</mat-label>
                                            <input autocomplete="off" matInput formControlName="consultantWorkplaceEmagineOffice" type="text">
                                        </mat-form-field>
                                    </div>
                                    <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10">
                                        <mat-checkbox color="accent" formControlName="consultantIsRemoteWorkplace" name="consultantIsRemoteWorkplace" class="black-checkbox u-mr--16" fxFlex="0 0 calc(16.5% - 8px)">
                                            Remote
                                        </mat-checkbox>
                                        <mat-form-field appearance="outline" class="u-w--100 mat-elevation-z0 " fxFlex="0 0 calc(33% + 16px)" *ngIf="consultantsForm.consultantData.at(i).get('consultantIsRemoteWorkplace')?.value">
                                            <mat-label>Remote country</mat-label>
                                        <input autocomplete="off" matInput formControlName="consultantWorkplaceRemote" type="text">
                                        </mat-form-field>
                                    </div>
                                </div>

                                <h3 class="workflow-gray--header u-mb--10">Expected Workload</h3>
                                <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10">
                                    <mat-form-field appearance="outline" class="u-w--100 mat-elevation-z0  u-mr--16" fxFlex="0 0 calc(16.5% - 8px)">
                                        <mat-label>Hours</mat-label>
                                        <input autocomplete="off" matInput formControlName="consultantExpectedWorkloadHours" type="text">
                                    </mat-form-field>
                                    <mat-form-field appearance="outline" class="u-w--100  filter-select" fxFlex="0 0 calc(16.5% - 8px)">
                                        <mat-label>Period</mat-label>
                                        <mat-select formControlName="consultantExpectedWorkloadPeriod" [disableOptionCentering]="true">
                                            <mat-option *ngFor="let item of [0,1,2,3]" [value]="item">
                                                {{ item }}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>

                                <h3 class="workflow-gray--header u-mb--10">Cap on Time Reporting</h3>
                                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                                    <mat-button-toggle-group class="workflow-toggle-buttons" formControlName="consultantCapOnTimeReporting">
                                        <mat-button-toggle *ngFor="let item of ['Cap on units', 'Cap on value', 'No cap']" [value]="false">
                                            {{ item }}
                                        </mat-button-toggle>
                                    </mat-button-toggle-group>
                                </div>

                                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                                    <mat-form-field appearance="outline" class="u-w--100  u-mr--16" fxFlex="0 0 calc(16.5% - 8px)">
                                        <mat-label>Max value</mat-label>
                                        <input autocomplete="off" matInput formControlName="consultantCapOnTimeReportingValue" type="text">
                                    </mat-form-field>
                                    <mat-form-field appearance="outline" class="u-w--100  filter-select" fxFlex="0 0 calc(16.5% - 8px)">
                                        <mat-label>Currency</mat-label>
                                        <mat-select formControlName="consultantCapOnTimeReportingCurrency" [disableOptionCentering]="true">
                                            <mat-option *ngFor="let item of currencies" [value]="item.id">
                                                {{ item.name }}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                            </div>
                            <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>

                            <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                                <h2 class="workflow-section--header">Consultant Payment</h2>
                                <h3 class="workflow-gray--header u-mb--10">Payment entity (consultant)</h3>
                                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                                    <mat-form-field appearance="outline" class="u-w--100  filter-select" fxFlex="33%">
                                        <mat-label>ProData Entity</mat-label>
                                        <mat-select formControlName="consultantProdataEntity" [disableOptionCentering]="true">
                                            <mat-option *ngFor="let item of currencies" [value]="item.id">
                                                {{ item.name }}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>

                                <h3 class="workflow-gray--header u-mb--10">Price</h3>
                                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                                    <mat-button-toggle-group class="workflow-toggle-buttons" formControlName="consultantPrice">
                                        <mat-button-toggle *ngFor="let item of ['Time based', 'Fixed', 'Milestones']" [value]="false">
                                            {{ item }}
                                        </mat-button-toggle>
                                    </mat-button-toggle-group>
                                </div>

                                <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10">
                                    <mat-form-field appearance="outline" class="u-w--100  u-mr--16" fxFlex="0 0 calc(16.5% - 8px)">
                                        <mat-label>Rate</mat-label>
                                        <input autocomplete="off" matInput formControlName="consultantRate" type="text">
                                    </mat-form-field>
                                    <mat-form-field appearance="outline" class="u-w--100  filter-select u-mr--16" fxFlex="0 0 calc(16.5% - 8px)">
                                        <mat-label>Unit type</mat-label>
                                        <mat-select formControlName="consultantRateUnitType" [disableOptionCentering]="true">
                                            <mat-option *ngFor="let item of rateUnitTypes" [value]="item.id">
                                                {{ item.name }}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <mat-form-field appearance="outline" class="u-w--100  filter-select u-mr--16" fxFlex="0 0 calc(16.5% - 8px)">
                                        <mat-label>Currency</mat-label>
                                        <mat-select formControlName="consultantRateCurrency" [disableOptionCentering]="true">
                                            <mat-option *ngFor="let item of currencies" [value]="item.id">
                                                {{ item.name }}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <div fxFlex="0 0 calc(16.5% - 8px)" fxLayoutAlign="start center" class="workflow-form--consultants__payment-price-text">
                                        Calculated margin (20%)
                                    </div>
                                </div>

                                <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10">
                                    <mat-form-field appearance="outline" class="u-w--100  u-mr--16" fxFlex="0 0 calc(16.5% - 8px)">
                                        <mat-label>PDC-to-PDC rate</mat-label>
                                        <input autocomplete="off" matInput formControlName="consultantPDCRate" type="text">
                                    </mat-form-field>
                                    <mat-form-field appearance="outline" class="u-w--100  filter-select u-mr--16" fxFlex="0 0 calc(16.5% - 8px)">
                                        <mat-label>Unit type</mat-label>
                                        <mat-select formControlName="consultantPDCRateUnitType" [disableOptionCentering]="true">
                                            <mat-option *ngFor="let item of rateUnitTypes" [value]="item.id">
                                                {{ item.name }}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <mat-form-field appearance="outline" class="u-w--100  filter-select u-mr--16" fxFlex="0 0 calc(16.5% - 8px)">
                                        <mat-label>Currency</mat-label>
                                        <mat-select formControlName="consultantPDCRateCurrency" [disableOptionCentering]="true">
                                            <mat-option *ngFor="let item of currencies" [value]="item.id">
                                                {{ item.name }}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <div fxFlex="0 0 calc(16.5% - 8px)" fxLayoutAlign="start center" class="workflow-form--consultants__payment-price-text">
                                        Calculated margin (%)
                                    </div>
                                </div>
                            </div>
                            <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>

                            <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                                <h2 class="workflow-section--header">Consultant Contract</h2>
                                <h3 class="workflow-gray--header u-mb--10">Special Contract Terms</h3>
                                <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100">
                                    <mat-form-field appearance="outline" class="u-w--100  textarea-input u-mr--16" fxFlex="0 0 calc(66% + 16px)">
                                        <mat-label>Consultant Special Contract Terms</mat-label>
                                        <textarea matInput autocomplete="new-password" name="consultantSpecialContractTerms" formControlName="consultantSpecialContractTerms">
                                        </textarea>
                                    </mat-form-field>
                                </div>
                                <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10">
                                    <mat-checkbox color="accent" formControlName="consultantSpecialContractTermsNone" name="consultantSpecialContractTermsNone" class="black-checkbox u-mr--16">
                                        None
                                    </mat-checkbox>
                                </div>
                            </div>
                            <mat-divider class="u-w--100 u-mt--20 u-mb--20"></mat-divider>

                            <div fxLayout="column" fxLayoutAlign="start start" class="u-w--100">
                                <h2 class="workflow-section--header">Account manager</h2>
                                <div fxLayout="row" fxLayoutAlign="start center" class="u-w--100 u-mb--10">
                                    <!-- <mat-form-field appearance="outline" class="u-w--100  filter-select" fxFlex="33%">
                                        <mat-label>Delivery Account manager</mat-label>
                                        <mat-select formControlName="consultantAccountManager" [disableOptionCentering]="true">
                                            <mat-option *ngFor="let item of currencies" [value]="item.id">
                                                {{ item.name }}
                                            </mat-option>
                                        </mat-select>
                                    </mat-form-field> -->
                                    <mat-form-field appearance="outline" class="u-w--100  filter-select" fxFlex="33%">
                                        <mat-label>Delivery Account manager</mat-label>
                                        <input #accountManagerFilterInput type="text" matInput [matAutocomplete]="managerAutocomplete" formControlName="consultantAccountManager" (click)="$event.stopPropagation()" placeholder="Select account manager(s)">
                                    </mat-form-field>
                                    <mat-autocomplete #managerAutocomplete="matAutocomplete" [displayWith]="displayNameFn">
                                        <ng-container>
                                            <mat-option *ngFor="let manager of filteredAccountManagers"
                                                [value]="manager"
                                                [ngClass]="{ 'no-data': manager.id === 'no-data' }">
                                                <span>{{ manager.name }}</span>
                                            </mat-option>
                                        </ng-container>
                                    </mat-autocomplete>
                                </div>
                            </div>
                        </div>

                        <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100">
                            <button class="button-add mat-elevation-z0 u-mt--10 u-mb--10" mat-flat-button (click)="addConsultantForm()">
                                <mat-icon>add</mat-icon>
                                Add consultant
                            </button>
                        </div>
                    </div>
                </ng-container>
            </form>
        </ng-container>
        <ng-template #terminationTemplate>
            <form [formGroup]="salesTerminateConsultantForm" class="workflow-form--consultants workflow--termination u-mb--20 u-w--100">
                <h3 class="workflow-gray--header">Final Evaluation</h3>
                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10 u-mt--10">
                    <mat-form-field appearance="outline" class="u-w--100  filter-select u-mr--16" fxFlex="33%">
                        <mat-label>Final Evaluation Reference Person</mat-label>
                        <mat-select formControlName="finalEvaluationReferencePerson" [disableOptionCentering]="true">
                            <mat-option *ngFor="let item of [0,1,2,3]" [value]="item">
                                {{ item }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--20">
                    <mat-checkbox color="accent" formControlName="isEvaluation" name="isEvaluation" class="black-checkbox" (change)="disableOrEnableInput(salesTerminateConsultantForm?.isEvaluation?.value, salesTerminateConsultantForm?.finalEvaluationCause)">
                        No evaluation
                    </mat-checkbox>
                </div>
                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                    <mat-form-field appearance="outline" class="u-w--100 textarea-input " fxFlex="0 0 calc(66% + 16px)">
                        <mat-label>Cause</mat-label>
                        <textarea matInput autocomplete="new-password" name="finalEvaluationCause" formControlName="finalEvaluationCause">
                        </textarea>
                    </mat-form-field>
                </div>

                <h3 class="workflow-gray--header u-mt--20">End of Cliient Contract</h3>
                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10">
                    <mat-button-toggle-group class="workflow-toggle-buttons u-mt--10" formControlName="endOfContract">
                        <mat-button-toggle
                            [value]="item.value"
                            *ngFor="let item of [{name: 'According to Contract', value: null}, {name: 'Before the end of COntract', value: 'SKI-02-17'}]">
                            {{ item.name }}
                        </mat-button-toggle>
                    </mat-button-toggle-group>
                </div>

                <div>
                    <mat-form-field appearance="outline">
                        <mat-label>End date</mat-label>
                        <input autocomplete="off" matInput
                                [matDatepicker]="endClientContractEndDatePicker"
                                name="clientContractEndDate" formControlName="endClientContractEndDate"
                                (focus)="endClientContractEndDatePicker.open()"
                                (click)="endClientContractEndDatePicker.open()" readonly>
                        <mat-icon class="calendar-icon" matSuffix svgIcon="calendar"></mat-icon>
                        <mat-datepicker #endClientContractEndDatePicker></mat-datepicker>
                    </mat-form-field>
                </div>

                <div fxLayout="row" fxLayoutAlign="start start" class="u-w--100 u-mb--10 u-mt--10">
                    <mat-form-field appearance="outline" class="u-w--100 textarea-input " fxFlex="0 0 calc(66% + 16px)">
                        <mat-label>Cause</mat-label>
                        <textarea matInput autocomplete="new-password" name="endClientContractCause" formControlName="endClientContractCause">
                        </textarea>
                    </mat-form-field>
                </div>
            </form>
        </ng-template>
    </ng-template>
</div>
