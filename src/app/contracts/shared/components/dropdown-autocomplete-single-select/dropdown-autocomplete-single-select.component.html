<mat-form-field appearance="outline" [style.width]="width" >
    <mat-label>{{ label }}</mat-label>
    <input
        matInput
        type="text"
        [placeholder]="label"
        [formControl]="inputControl"
        [matAutocomplete]="auto"
        [errorStateMatcher]="matcher"
        (blur)="onFocusOut()"
    />
    <mat-autocomplete
        #auto="matAutocomplete"
        [displayWith]="displayFn.bind(context)"
        (optionSelected)="onSelect($event.option.value)"
    >
        <ng-container
            *ngFor="let option of options; trackBy: trackById.bind(this)"
        >
            <mat-option [value]="option">
                <ng-container
                    *ngIf="optionTemplate; else noTemplate"
                    [ngTemplateOutlet]="optionTemplate"
                    [ngTemplateOutletContext]="{ option }"
                >
                </ng-container>
                <ng-template #noTemplate>{{ option[labelKey] }}</ng-template>
            </mat-option>
        </ng-container>
    </mat-autocomplete>
    <mat-error
        ><app-validator [control]="inputControl"></app-validator
    ></mat-error>
</mat-form-field>
