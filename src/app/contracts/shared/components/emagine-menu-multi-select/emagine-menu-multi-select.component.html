<div class="menu-component-wrapper">
    <button
        mat-icon-button
        [matMenuTriggerFor]="menu"
        class="toggle-button"
        (menuOpened)="isOpened = true"
    >
        <div class="align-items">
            <span
                [ngClass]="
                    isOpened
                        ? ['opened__green', 'icon__margin']
                        : 'closed__grey'
                "
                ><ng-content [ngTemplateOutlet]="triggerButton"></ng-content>
            </span>
            <!-- <mat-icon svgIcon="mat-menu-icon" *ngIf="isOpened"></mat-icon> -->
        </div>
    </button>
    <mat-menu
        #menu="matMenu"
        (closed)="isOpened = false"
        backdropClass="mat-menu-content-wrapper"
    >
        <div class="scrollbar-container" fuseScrollbar>
            <mat-checkbox
                *ngFor="let option of options"
                (click)="$event.stopPropagation()"
                [matTooltip]="
                    option[displayedProperty].length > maxLength
                        ? option[displayedProperty]
                        : ''
                "
                [value]="option"
                (change)="toggleSelect(option)"
                [checked]="option.selected"
            >
                <ng-container
                    *ngIf="optionPrefix"
                    [ngTemplateOutlet]="optionPrefix"
                    [ngTemplateOutletContext]="{ $implicit: option }"
                >
                </ng-container>
                {{
                    option[displayedProperty].length > maxLength
                        ? (option[displayedProperty]
                              | slice: 0:maxLength - threeDotsLength) + "..."
                        : option[displayedProperty]
                }}</mat-checkbox
            >
        </div>
    </mat-menu>
</div>
