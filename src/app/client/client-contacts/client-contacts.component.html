<div class="client-contacts">
    <div fxLayout="column" fxLayoutAlign="start center" class="client-contacts--table u-w--100">
        <div fxLayout="column" fxFlexFill>
            <mat-table #table [dataSource]="clientContactsDataSource" class="white-table u-w--100">
                <ng-container matColumnDef="id">
                    <mat-header-cell *matHeaderCellDef fxFlex="5%"> ID </mat-header-cell>
                    <mat-cell *matCellDef="let row" fxFlex="5%" [matTooltip]="row?.id" matTooltipClass="white-tooltip" appShowIfTruncated>
                        {{row?.id}}
                    </mat-cell>
                </ng-container>
                <ng-container matColumnDef="status">
                    <mat-header-cell *matHeaderCellDef fxFlex="3%"></mat-header-cell>
                    <mat-cell *matCellDef="let row" fxFlex="3%" fxLayoutAlign="center center">
                        <mat-icon *ngIf="row?.isActive" class="contact-status-dot" [ngClass]="row?.isActive ? 'active-status' : 'non-active-status'" [matTooltip]="row?.isActive? 'Active' : 'Not-active'" matTooltipClass="white-tooltip">fiber_manual_record</mat-icon>
                        <mat-icon *ngIf="row?.isWrongfullyDeletedInHubspot" class="contact-status-dot wrongfully-deleted-status" matTooltip="Wrongfully deleted in HubSpot" matTooltipClass="white-tooltip">fiber_manual_record</mat-icon>
                        <mat-icon *ngIf="!row?.isDeleted" class="contact-status-dot deleted-status" matTooltip="Deleted" matTooltipClass="white-tooltip">fiber_manual_record</mat-icon>
                    </mat-cell>
                </ng-container>
                <ng-container matColumnDef="name">
                    <mat-header-cell *matHeaderCellDef fxFlex="30%"> Name </mat-header-cell>
                    <mat-cell *matCellDef="let row" fxFlex="30%">
                        <span class="text-truncate-ellipsis text-bold-800" [matTooltip]="row?.firstName + ' ' + row?.lastName" matTooltipClass="white-tooltip" appShowIfTruncated>
                            {{row?.firstName + ' ' + row?.lastName}}
                        </span>
                    </mat-cell>
                </ng-container>
                <ng-container matColumnDef="title">
                    <mat-header-cell *matHeaderCellDef fxFlex="20%"> Title </mat-header-cell>
                    <mat-cell *matCellDef="let row" fxFlex="20%">
                        <span class="text-truncate-ellipsis" [matTooltip]="row?.jobTitle" matTooltipClass="white-tooltip" appShowIfTruncated>
                            {{row?.jobTitle}}
                        </span>
                    </mat-cell>
                </ng-container>
                <ng-container matColumnDef="email">
                    <mat-header-cell *matHeaderCellDef fxFlex="15%"> Email </mat-header-cell>
                    <mat-cell *matCellDef="let row" fxFlex="15%">
                        <span class="text-truncate-ellipsis" [matTooltip]="row?.email" matTooltipClass="white-tooltip" appShowIfTruncated>
                            {{row?.email}}
                        </span>
                    </mat-cell>
                </ng-container>
                <ng-container matColumnDef="phone">
                    <mat-header-cell *matHeaderCellDef fxFlex="10%"> Phone </mat-header-cell>
                    <mat-cell *matCellDef="let row" fxFlex="10%">
                        <span class="text-truncate-ellipsis" [matTooltip]="row?.mobilePhone" matTooltipClass="white-tooltip" appShowIfTruncated>
                            {{row?.mobilePhone}}
                        </span>
                    </mat-cell>
                </ng-container>
                <ng-container matColumnDef="lastCamLogin">
                    <mat-header-cell *matHeaderCellDef fxFlex="10%"> Last CAM Login </mat-header-cell>
                    <mat-cell *matCellDef="let row" fxFlex="10%">
                        <span class="text-truncate-ellipsis" [matTooltip]="row?.lastCamLogin | momentFormat: momentFormatType" matTooltipClass="white-tooltip" appShowIfTruncated>
                            {{row?.lastCamLogin | momentFormat}}
                        </span>
                    </mat-cell>
                </ng-container>
                <ng-container matColumnDef="owner">
                    <mat-header-cell *matHeaderCellDef fxFlex="8%"> Owner </mat-header-cell>
                    <mat-cell *matCellDef="let row" fxFlex="8%">
                        <img class="image-settings--dropdown" [matTooltip]="row?.owner?.name" matTooltipClass="white-tooltip" [ngSrc]="employeePhotoUrl + row?.owner?.externalId! + '.jpg'" width="24" height="24" appImageFallback />
                    </mat-cell>
                </ng-container>
                <mat-header-row *matHeaderRowDef="clientDisplayColumns"></mat-header-row>
                <mat-row *matRowDef="let row; columns: clientDisplayColumns;" class="mat-elevation-z0" [ngClass]="{'contact-deleted-row': row?.isWrongfullyDeletedInHubspot}"></mat-row>
            </mat-table>
            <div class="spinner-container" *ngIf="isDataLoading">
                <mat-spinner [diameter]="50"></mat-spinner>
            </div>
            <div class="results-not-found" *ngIf="totalCount === 0 && !isDataLoading">
                RESULTS NOT FOUND
            </div>
        </div>
    </div>
</div>
